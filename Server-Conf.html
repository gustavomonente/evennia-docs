<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="./img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Server Conf - Evennia Manual</title>
    <link href="./css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="./css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="./css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="./js/jquery-3.2.1.min.js"></script>
    <script src="./js/bootstrap-3.3.7.min.js"></script>
    <script src="./js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '.';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Settings file", url: "#_top", children: [
          ]},
          {title: "Other files in the server/conf directory", url: "#other-files-in-the-serverconf-directory", children: [
          ]},
          {title: "ServerConf", url: "#serverconf", children: [
          ]},
        ];

    </script>
    <script src="./js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    

    <p>Evennia runs out of the box without any changes to its settings. But there are several important ways to customize the server and expand it with your own plugins. </p>
<h2 id="settings-file">Settings file<a class="headerlink" href="#settings-file" title="Permanent link">&para;</a></h2>
<p>The "Settings" file referenced throughout the documentation is the file <code>mygame/server/conf/settings.py</code>. This is automatically created on the first run of <code>evennia --init</code> (see the <a href="Getting-Started">Getting Started</a> page). </p>
<p>Your new <code>settings.py</code> is relatively bare out of the box. Evennia's core settings file is actually <a href="https://github.com/evennia/evennia/blob/master/evennia/settings_default.py">evennia/settings_default.py</a> and is considerably more extensive (it is also heavily documented so you should refer to this file directly for the available settings). </p>
<p>Since <code>mygame/server/conf/settings.py</code> is a normal Python module, it simply imports <code>evennia/settings_default.py</code> into itself at the top.</p>
<p>This means that if any setting you want to change were to depend on some <em>other</em> default setting, you might need to copy &amp; paste both in order to change them and get the effect you want (for most commonly changed settings, this is not something you need to worry about).</p>
<p>You should never edit <code>evennia/settings_default.py</code>. Rather you should copy&amp;paste the select variables you want to change into your <code>settings.py</code> and edit them there. This will overload the previously imported defaults.</p>
<blockquote>
<p>Warning: It may be tempting to copy everything from <code>settings_default.py</code> into your own settings file. There is a reason we don't do this out of the box though: it makes it directly clear what changes you did. Also, if you limit your copying to the things you really need you will directly be able to take advantage of upstream changes and additions to Evennia for anything you didn't customize. </p>
</blockquote>
<p>In code, the settings is accessed through </p>
<pre><code class="python">    from django.conf import settings
     # or (shorter):
    from evennia import settings
     # example:
    servername = settings.SERVER_NAME
</code></pre>

<p>Each setting appears as a property on the imported <code>settings</code> object.  You can also explore all possible options with <code>evennia.settings_full</code> (this also includes advanced Django defaults that are not touched in default Evennia). </p>
<blockquote>
<p>It should be pointed out that when importing <code>settings</code> into your code like this, it will be <em>read only</em>. You <em>cannot</em> edit your settings from your code! The only way to change an Evennia setting is to edit <code>mygame/server/conf/settings.py</code> directly. You also generally need to restart the server (possibly also the Portal) before a changed setting becomes available. </p>
</blockquote>
<h2 id="other-files-in-the-serverconf-directory">Other files in the <code>server/conf</code> directory<a class="headerlink" href="#other-files-in-the-serverconf-directory" title="Permanent link">&para;</a></h2>
<p>Apart from the main <code>settings.py</code> file, </p>
<ul>
<li><code>at_initial_setup.py</code> - this allows you to add a custom startup method to be called (only) the very first time Evennia starts (at the same time as user #1 and Limbo is created). It can be made to start your own global scripts or set up other system/world-related things your game needs to have running from the start.</li>
<li><code>at_server_startstop.py</code> - this module contains two functions that Evennia will call every time the Server starts and stops respectively - this includes stopping due to reloading and resetting as well as shutting down completely. It's a useful place to put custom startup code for handlers and other things that must run in your game but which has no database persistence.</li>
<li><code>connection_screens.py</code> - all global string variables in this module are interpreted by Evennia as a greeting screen to show when an Account first connects. If more than one string variable is present in the module a random one will be picked.</li>
<li><code>inlinefuncs.py</code> - this is where you can define custom <a href="TextTags#inlinefuncs">Inline functions</a>.</li>
<li><code>inputfuncs.py</code> - this is where you define custom Inputfuncs.md to handle data from the client.</li>
<li><code>lockfuncs.py</code> - this is one of many possible modules to hold your own "safe" <em>lock functions</em> to make available to Evennia's <a href="Locks.html">Locks</a>.</li>
<li><code>mssp.py</code> - this holds meta information about your game. It is used by MUD search engines (which you often have to register with) in order to display what kind of game you are running along with
    statistics such as number of online accounts and online status.</li>
<li><code>oobfuncs.py</code> - in here you can define custom <a href="OOB.html">OOB functions</a>.</li>
<li><code>portal_services_plugin.py</code> - this allows for adding your own custom services/protocols to the Portal. It must define one particular function that will be called by Evennia at startup. There can be any number of service plugin modules, all will be imported and used if defined. More info can be found <a href="http://code.google.com/p/evennia/wiki/SessionProtocols#Adding_custom_Protocols">here</a>.</li>
<li><code>server_services_plugin.py</code> - this is equivalent to the previous one, but used for adding new services to the Server instead. More info can be found <a href="http://code.google.com/p/evennia/wiki/SessionProtocols#Adding_custom_Protocols">here</a>.</li>
</ul>
<p>Some other Evennia systems can be customized by plugin modules but has no explicit template in <code>conf/</code>:</p>
<ul>
<li><em>cmdparser.py</em> - a custom module can be used to totally replace Evennia's default command parser. All this does is to split the incoming string into "command name" and "the rest". It also handles things like error messages for no-matches and multiple-matches among other things that makes this more complex than it sounds. The default parser is <em>very</em> generic, so you are most often best served by modifying things further down the line (on the command parse level) than here.</li>
<li><em>at_search.py</em> - this allows for replacing the way Evennia handles search results. It allows to change how errors are echoed and how multi-matches are resolved and reported (like how the default understands that "2-ball" should match the second "ball" object if there are two of them in the room).</li>
</ul>
<h2 id="serverconf">ServerConf<a class="headerlink" href="#serverconf" title="Permanent link">&para;</a></h2>
<p>There is a special database model called <code>ServerConf</code> that stores server internal data and settings such as current account count (for interfacing with the webserver), startup status and many other things.  It's rarely of use outside the server core itself but may be good to
know about if you are an Evennia developer. </p>

  <br>
    

    <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>
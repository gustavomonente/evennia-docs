<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>Setting up PyCharm - Evennia Manual</title>
        <link href="css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="js/jquery-1.10.2.min.js" defer></script>
        <script src="js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="index.html">Evennia Manual</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="index.html">Home</a>
                            </li>
                            <li >
                                <a href="Administrative-Docs.html">Admin</a>
                            </li>
                            <li >
                                <a href="Builder-Docs.html">Building</a>
                            </li>
                            <li >
                                <a href="Developer-Central.html">Game Development</a>
                            </li>
                            <li >
                                <a href="Tutorials.html">Tutorials</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#setting-up-the-project-interpreter">Setting up the project interpreter</a></li>
        <li class="main "><a href="#attaching-pycharm-debugger-to-evennia">Attaching PyCharm debugger to Evennia</a></li>
        <li class="main "><a href="#setting-up-an-evennia-run-configuration">Setting up an Evennia run configuration</a></li>
        <li class="main "><a href="#alternative-run-confuguration-utilizing-logfiles-as-source-of-data">Alternative run confuguration - utilizing logfiles as source of data</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p><a href="https://www.jetbrains.com/pycharm/">PyCharm</a> is a Python developer's IDE from Jetbrains available for Windows, Mac and Linux. It is a commercial product but offer free trials, a scaled-down community edition and also generous licenses for OSS projects like Evennia. </p>
<blockquote>
<p>This page was originally tested on Windows (so use Windows-style path examples), but should work the same for all platforms.</p>
</blockquote>
<p>First, install Evennia on your local machine with <a class="wikilink" href="/Getting_Started.html">Getting Started</a>. If you're new to PyCharm, loading your project is as easy as selecting the <code>Open</code> option when PyCharm starts, and browsing to your game folder (the one created with <code>evennia --init</code>). We refer to it as <code>mygame</code> here.</p>
<p>If you want to be able to examine evennia's core code or the scripts inside your virtualenv, you'll need to add them to your project too:
1. Go to <code>File &gt; Open...</code>
1. Select the folder (i.e. the <code>evennia</code> root)
1. Select "Open in current window" and "Add to currently opened projects"</p>
<h2 id="setting-up-the-project-interpreter">Setting up the project interpreter<a class="headerlink" href="#setting-up-the-project-interpreter" title="Permanent link">&para;</a></h2>
<p>It's a good idea to do this before attempting anything further. The rest of this page assumes your project is already configured in PyCharm.</p>
<ol>
<li>Go to <code>File &gt; Settings... &gt; Project: \&lt;mygame\&gt; &gt; Project Interpreter</code></li>
<li>Click the Gear symbol <code>&gt; Add local</code></li>
<li>Navigate to your <code>evenv/scripts directory</code>, and select Python.exe</li>
</ol>
<p>Enjoy seeing all your imports checked properly, setting breakpoints, and live variable watching!</p>
<h2 id="attaching-pycharm-debugger-to-evennia">Attaching PyCharm debugger to Evennia<a class="headerlink" href="#attaching-pycharm-debugger-to-evennia" title="Permanent link">&para;</a></h2>
<ol>
<li>Launch Evennia in your preferred way (usually from a console/terminal)</li>
<li>Open your project in PyCharm</li>
<li>In the PyCharm menu, select <code>Run &gt; Attach to Local Process...</code></li>
<li>From the list, pick the <code>twistd</code> process with the <code>server.py</code> parameter (Example: <code>twistd.exe --nodaemon --logfile=\&lt;mygame\&gt;\server\logs\server.log --python=\&lt;evennia repo\&gt;\evennia\server\server.py</code>)</li>
</ol>
<p>Of course you can attach to the <code>portal</code> process as well.  If you want to debug the Evennia launcher or runner for some reason (or just learn how they work!), see Run Configuration below.</p>
<blockquote>
<p>NOTE: Whenever you reload Evennia, the old Server process will die and a new one start. So when you restart you have to detach from the old and then reattach to the new process that was created.</p>
<p>To make the process less tedious you can apply a filter in settings to show only the server.py process in the list. To do that navigate to: <code>Settings/Preferences | Build, Execution, Deployment | Python Debugger</code> and then in <code>Attach to process</code> field put in: <code>twistd.exe" --nodaemon</code>. This is an example for windows, I don't have a working mac/linux box.
<img alt="Example process filter configuration" src="https://i.imgur.com/vkSheR8.png" /></p>
</blockquote>
<h2 id="setting-up-an-evennia-run-configuration">Setting up an Evennia run configuration<a class="headerlink" href="#setting-up-an-evennia-run-configuration" title="Permanent link">&para;</a></h2>
<p>This configuration allows you to launch Evennia from inside PyCharm. Besides convenience, it also allows suspending and debugging the evennia_launcher or evennia_runner at points earlier than you could by running them externally and attaching. In fact by the time the server and/or portal are running the launcher will have exited already.</p>
<ol>
<li>Go to <code>Run &gt; Edit Configutations...</code></li>
<li>Click the plus-symbol to add a new configuration and choose Python</li>
<li>Add the script: <code>\&lt;yourrepo\&gt;\evenv\Scripts\evennia_launcher.py</code> (substitute your virtualenv if it's not named <code>evenv</code>)</li>
<li>Set script parameters to: <code>start -l</code> (-l enables console logging)</li>
<li>Ensure the chosen interpreter is from your virtualenv</li>
<li>Set Working directory to your <code>mygame</code> folder (not evenv nor evennia)</li>
<li>You can refer to the PyCharm documentation for general info, but you'll want to set at least a config name (like "MyMUD start" or similar). </li>
</ol>
<p>Now set up a "stop" configuration by following the same steps as above, but set your Script parameters to: stop (and name the configuration appropriately).</p>
<p>A dropdown box holding your new configurations should appear next to your PyCharm run button.  Select MyMUD start and press the debug icon to begin debugging.  Depending on how far you let the program run, you may need to run your "MyMUD stop" config to actually stop the server, before you'll be able start it again.</p>
<h2 id="alternative-run-confuguration-utilizing-logfiles-as-source-of-data">Alternative run confuguration - utilizing logfiles as source of data<a class="headerlink" href="#alternative-run-confuguration-utilizing-logfiles-as-source-of-data" title="Permanent link">&para;</a></h2>
<p>This configuration takes a bit different approach as instead of focusing on getting the data back through logfiles. Reason for that is this way you can easily separate data streams, for example you rarely want to follow both server and portal at the same time, and this will allow it. This will also make sure to stop the evennia before starting it, essentially working as reload command (it will also include instructions how to disable that part of functionality). We will start by definifing a configuration that will stop evennia. This assumes that <code>upfire</code> is your pycharm project name, and also the game name, hence the <code>upfire/upfire</code> path.</p>
<ol>
<li>Go to <code>Run &gt; Edit Configutations...</code>\</li>
<li>Click the plus-symbol to add a new configuration and choose the python interpreter to use (should be project default)</li>
<li>Name the configuration as "stop evennia" and fill rest of the fields accordingly to the image:
<img alt="Stop run configuration" src="https://i.imgur.com/gbkXhlG.png" /></li>
<li>Press <code>Apply</code></li>
</ol>
<p>Now we will define the start/reload command that will make sure that evennia is not running already, and then start the server in one go.
1. Go to <code>Run &gt; Edit Configutations...</code>\
1. Click the plus-symbol to add a new configuration and choose the python interpreter to use (should be project default)
1. Name the configuration as "stop evennia" and fill rest of the fields accordingly to the image:
<img alt="Start run configuration" src="https://i.imgur.com/5YEjeHq.png" />
1. Navigate to the <code>Logs</code> tab and add the log files you would like to follow. The picture shows adding <code>portal.log</code> which will show itself in <code>portal</code> tab when running:
<img alt="Configuring logs following" src="https://i.imgur.com/gWYuOWl.png" />
1. Skip the following steps if you don't want the launcher to stop evennia before starting.
1. Head back to <code>Configuration</code> tab and press the <code>+</code> sign at the bottom, under <code>Before launch....</code> and select <code>Run another configuration</code> from the submenu that will pop up.
1. Click <code>stop evennia</code> and make sure that it's added to the list like on the image above.
1. Click <code>Apply</code> and close the run configuration window.</p>
<p>You are now ready to go, and if you will fire up <code>start evennia</code> configuration you should see following in the bottom panel:
<img alt="Example of running alternative configuration" src="https://i.imgur.com/nTfpC04.png" />
and you can click through the tabs to check appropriate logs, or even the console output as it is still running in interactive mode.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js" defer></script>
        <script src="search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

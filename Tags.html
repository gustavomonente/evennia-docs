<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="./img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Tags - Evennia Manual</title>
    <link href="./css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="./css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="./css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="./css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="./js/jquery-3.2.1.min.js"></script>
    <script src="./js/bootstrap-3.3.7.min.js"></script>
    <script src="./js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '.';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Properties of Tags (and Aliases and Permissions)", url: "#_top", children: [
          ]},
          {title: "Adding/Removing Tags", url: "#addingremoving-tags", children: [
          ]},
          {title: "Searching for objects with a given tag", url: "#searching-for-objects-with-a-given-tag", children: [
          ]},
          {title: "Using Aliases and Permissions", url: "#using-aliases-and-permissions", children: [
          ]},
          {title: "Assorted notes", url: "#assorted-notes", children: [
          ]},
        ];

    </script>
    <script src="./js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    

    <p>A common task of a game designer is to organize and find groups of objects and do operations on them. A classic example is to have a weather script affect all "outside" rooms. Another would be for a player casting a magic spell that affects every location "in the dungeon", but not those "outside". Another would be to quickly find everyone joined with a particular guild or everyone currently dead. </p>
<p><em>Tags</em> are short text labels that you attach to objects so as to easily be able to retrieve and group them. An Evennia entity can be tagged with any number of Tags. On the database side, Tag entities are <em>shared</em> between all objects with that tag. This makes them very efficient but also fundamentally different from <a href="Attributes.html">Attributes</a>, each of which always belongs to one <em>single</em> object. </p>
<p>In Evennia, Tags are technically also used to implement <code>Aliases</code> (alternative names for objects) and <code>Permissions</code> (simple strings for <a href="Locks.html">Locks</a> to check for). </p>
<h2 id="properties-of-tags-and-aliases-and-permissions">Properties of Tags (and Aliases and Permissions)<a class="headerlink" href="#properties-of-tags-and-aliases-and-permissions" title="Permanent link">&para;</a></h2>
<p>Tags are <em>unique</em>. This means that there is only ever one Tag object with a given key and category. When Tags are assigned to game entities, these entities are actually sharing the same Tag. This means that Tags are not suitable for storing information about a single object - use an <a href="Attributes.html">Attribute</a> for this instead. Tags are a lot more limited than Attributes but this also makes them very quick to lookup in the database - this is the whole point.</p>
<p>Tags have the following properties, stored in the database:</p>
<ul>
<li><strong>key</strong> - the name of the Tag. This is the main property to search for when looking up a Tag.</li>
<li><strong>category</strong> - this category allows for retrieving only specific subsets of tags used for different purposes. You could have one category of tags for "zones", another for "outdoor locations", for example.</li>
<li><strong>data</strong> - this is an optional text field with information about the tag. Remember that Tags are shared between entities, so this field cannot hold any object-specific information. Usually it would be used to hold info about the group of entities the Tag is tagging - possibly used for contextual help like a tool tip. It is not used by default.</li>
</ul>
<p>There are also two special properties. These should usually not need to be changed or set, it is used internally by Evennia to implement various other uses it makes of the <code>Tag</code> object:
- <strong>model</strong> - this holds a <em>natural-key</em> description of the model object that this tag deals with, on the form <em>application.modelclass</em>, for example <code>objects.objectdb</code>. It used by the TagHandler of each entity type for correctly storing the data behind the  scenes. 
- <strong>tagtype</strong> - this is a "top-level category" of sorts for the inbuilt children of Tags, namely <em>Aliases</em> and <em>Permissions</em>. The Taghandlers using this special field are especially intended to free up the <em>category</em> property for any use you desire. </p>
<h2 id="addingremoving-tags">Adding/Removing Tags<a class="headerlink" href="#addingremoving-tags" title="Permanent link">&para;</a></h2>
<p>You can tag any <em>typeclassed</em> object, namely <a href="Objects.html">Objects</a>, <a href="Accounts.html">Accounts</a>, <a href="Scripts.html">Scripts</a> and <a href="Communications.html">Channels</a>. General tags are added by the <em>Taghandler</em>.  The tag handler is accessed as a property <code>tags</code> on the relevant entity: </p>
<pre><code class="python">     mychair.tags.add(&quot;furniture&quot;)
     myroom.tags.add(&quot;dungeon#01&quot;)
     myscript.tags.add(&quot;weather&quot;, category=&quot;climate&quot;)
     myaccount.tags.add(&quot;guestaccount&quot;)

     mychair.tags.all()  # returns a list of Tags
     mychair.tags.remove(&quot;furniture&quot;) 
     mychair.tags.clear()    
</code></pre>

<p>Adding a new tag will either create a new Tag or re-use an already existing one. When using <code>remove</code>, the <code>Tag</code> is not deleted but are just disconnected from the tagged object. This makes for very quick operations. The <code>clear</code> method removes (disconnects) all Tags from the object. You can also use the default <code>@tag</code> command: </p>
<pre><code> @tag mychair = furniture
</code></pre>
<h2 id="searching-for-objects-with-a-given-tag">Searching for objects with a given tag<a class="headerlink" href="#searching-for-objects-with-a-given-tag" title="Permanent link">&para;</a></h2>
<p>Usually tags are used as a quick way to find tagged database entities. You can retrieve all objects with a given Tag like this in code: </p>
<pre><code class="python">     import evennia

     # all methods return Querysets

     # search for objects 
     objs = evennia.search_tag(&quot;furniture&quot;)
     dungeon = evennia.search_tag(&quot;dungeon#01&quot;)
     forest_rooms = evennia.search_tag(category=&quot;forest&quot;) 
     forest_meadows = evennia.search_tag(&quot;meadow&quot;, category=&quot;forest&quot;)
     magic_meadows = evennia.search_tag(&quot;meadow&quot;, category=&quot;magical&quot;)

     # search for scripts
     weather = evennia.search_tag_script(&quot;weather&quot;)
     climates = evennia.search_tag_script(category=&quot;climate&quot;)

     # search for accounts
     accounts = evennia.search_tag_account(&quot;guestaccount&quot;)          
</code></pre>

<p>Using any of the <code>search_tag</code> variants will all return <a href="https://docs.djangoproject.com/en/2.1/ref/models/querysets/">Django Querysets</a>, including if you only have one match. You can treat querysets as lists and iterate over them, or continue building search queries with them. </p>
<p>Remember when searching that not setting a category means setting it to <code>None</code> - this does <em>not</em> mean that category is undefined, rather <code>None</code> is considered the default, unnamed category. </p>
<pre><code class="python">import evennia 

myobj1.tags.add(&quot;foo&quot;)  # implies category=None
myobj2.tags.add(&quot;foo&quot;, category=&quot;bar&quot;)

# this returns a queryset with *only* myobj1 
objs = evennia.search_tag(&quot;foo&quot;)

# these return a queryset with *only* myobj2
objs = evennia.search_tag(&quot;foo&quot;, category=&quot;bar&quot;)
# or
objs = evennia.search_tag(category=&quot;bar&quot;)

</code></pre>

<p>There is also an in-game command that deals with assigning and using (<a href="Objects.html">Object-</a>) tags:</p>
<pre><code> @tag/search furniture
</code></pre>
<h2 id="using-aliases-and-permissions">Using Aliases and Permissions<a class="headerlink" href="#using-aliases-and-permissions" title="Permanent link">&para;</a></h2>
<p>Aliases and Permissions are implemented using normal TagHandlers that simply save Tags with a different <code>tagtype</code>. These handlers are named <code>aliases</code> and <code>permissions</code> on all Objects. They are used in the same way as Tags above:</p>
<pre><code class="python">    boy.aliases.add(&quot;rascal&quot;)
    boy.permissions.add(&quot;Builders&quot;)
    boy.permissions.remove(&quot;Builders&quot;)

    all_aliases = boy.aliases.all()
</code></pre>

<p>and so on. Similarly to how <code>@tag</code> works in-game, there is also the <code>@perm</code> command for assigning permissions and <code>@alias</code> command for aliases. </p>
<h2 id="assorted-notes">Assorted notes<a class="headerlink" href="#assorted-notes" title="Permanent link">&para;</a></h2>
<p>Generally, tags are enough on their own for grouping objects. Having no tag <code>category</code> is perfectly fine and the normal operation. Simply adding a new Tag for grouping objects is often better than making a new category. So think hard before deciding you really need to categorize your Tags. </p>
<p>That said, tag categories can be useful if you build some game system that uses tags. You can then use tag categories to make sure to separate tags created with this system from any other tags created elsewhere. You can then supply custom search methods that <em>only</em> find objects tagged with tags of that category. An example of this 
is found in the <a href="Zones.html">Zone tutorial</a>. </p>

  <br>
    

    <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>